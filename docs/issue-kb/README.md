# 问题追踪与知识库流程

本文档定义了项目的问题追踪、复盘与知识共享的标准流程。目标是确保每个问题都能被结构化地记录、系统地解决，并转化为团队的共同财富，从而实现持续的质量改进。

## 1. 统一的问题分类与记录模板

为了保证信息的一致性和完整性，所有新发现的问题（无论是在测试阶段还是生产环境）都必须使用以下模板进行记录。

### 问题记录模板

```markdown
# [问题标题]: (例如：登录页在Safari浏览器下样式错乱)

**发现阶段**: (单元测试 / 集成测试 / E2E 测试 / 生产监控)
**影响范围**: (例如：登录模块 / 全局用户 / 后台数据处理)
**责任人**: @username
**解决时间**: YYYY-MM-DD

**严重度**: (Critical / High / Medium / Low)
**频次**: (High / Medium / Low)
**标签**: (性能 / 安全 / 兼容性 / 可维护性 / UX)

---

## 根本原因分析 (Root Cause)

(详细描述问题的技术根源。例如：由于 Safari 不支持某个 CSS 特性，且缺少相应的 polyfill 或 fallback 样式，导致 flex 布局在特定场景下失效。)

## 复现步骤 (Steps to Reproduce)

1.  (步骤一：例如，使用 Safari 浏览器版本 15.x)
2.  (步骤二：例如，访问 /login 页面)
3.  (步骤三：例如，观察到登录按钮宽度溢出)
4.  ...

## 解决方案与代码示例

(简述解决思路，并附上关键的代码片段或伪代码。)

```typescript
// 示例：在 styles.css 中添加针对 Safari 的 hack
_::-webkit-full-page-media, _:future, :root .safari_only {
  width: 90%; /* 或者其他修复方案 */
}
```

## 防范措施 (Prevention Measures)

(如何在未来避免同类问题？)

*   **测试层面**: 在 E2E 测试套件中增加针对 Safari 浏览器的截图对比测试。
*   **代码层面**: 建立 CSS 规范，要求对所有使用非标准或有兼容性风险的特性添加注释和 fallback。
*   **工具层面**: 引入 stylelint 插件，自动检测已知的 CSS 兼容性问题。

## 关联文档与链接

*   **关联 PR**: [link to GitHub PR]
*   **原始 Issue**: [link to GitHub Issue]
*   **外部参考**: [link to MDN, Stack Overflow, etc.]
```

---

## 2. 优先级标签系统

使用“严重度”和“频次”的四象限法，并结合具体的技术领域标签，对问题进行多维度分类，以便快速筛选和确定处理优先级。

*   **严重度 (Severity)**: `Critical` / `High` / `Medium` / `Low`
*   **频次 (Frequency)**: `High` / `Medium` / `Low`
*   **技术标签 (Tags)**: `性能` / `安全` / `兼容性` / `可维护性` / `UX` (用户体验)

## 3. 知识库存储 (当前实现)

所有已解决问题的结构化文档，都统一存储在当前 Git 仓库的 `/docs/issue-kb/` 目录下，以 Markdown 文件的形式存在。这种方式保证了知识与代码同步演进。

## 4. “从测试到知识库”的流程

1.  **创建 Issue**: 任何测试失败或线上问题，首先应在 GitHub Issues 中创建。
2.  **关联 PR**: 开发者在提交修复问题的 Pull Request 时，必须在 PR 描述中链接到对应的 Issue。
3.  **填写核心分析**: 在 PR 被合并之前，开发者必须在 Issue 或 PR 评论中，至少填写 **“根本原因分析”** 和 **“防范措施”** 这两项。
4.  **归档到知识库**: 当 QA 复测通过、问题关闭后，由该问题的解决者负责，将完整的分析内容整理成一个独立的 Markdown 文件，并提交到 `/docs/issue-kb/` 目录。

## 5. 定期复盘与学习落地

*   **每周复盘**: 在每周的技术例会上，由技术负责人挑选 1-2 个本周解决的、有代表性的问题进行分享和讨论。
*   **专题分享**: 按模块或标签（如“性能”专题）进行归类，不定期组织小范围的技术分享会。
*   **流程改进**: 根据知识库中积累的“防范措施”，推动 CI/CD 流程的改进，例如增加新的静态代码检查规则 (lint)、新的自动化测试用例等。

## 6. 持续优化与追踪

*   **定期审阅**: 对知识库中的所有条目设置一个默认的审阅周期（例如一年）。技术负责人会定期评估这些文档是否依然适用，或需要更新。
*   **数据驱动**: 统计“问题归档总数”与“同类问题复发率”，以此作为衡量团队质量保障体系有效性的关键指标之一，并驱动测试策略和开发流程的持续改进。
